{"version":3,"file":"useObservable.mjs","sources":["../src/useObservable.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { Observable } from 'rxjs'\n\nfunction initialObservableValue<T>(observable$: Observable<T>, defaultValue: T | null = null): T | null {\n\tlet value = defaultValue\n\n\tobservable$\n\t\t.subscribe(\n\t\t\tval => {\n\t\t\t\tvalue = val\n\t\t\t}\n\t\t)\n\t\t.unsubscribe()\n\n\treturn value\n}\n\nexport function useObservable<T>(observable: Observable<T> | (() => Observable<T>), initialValue: T | null = null): T | null {\n\tconst [ stream ] = useState(observable)\n\tconst [ value, setValue ] = useState(() => initialObservableValue(stream, initialValue))\n\n\tuseEffect(() => {\n\t\tconst subscription = stream.subscribe(next => {\n\t\t\tsetValue(next)\n\t\t})\n\t\treturn () => {\n\t\t\tsubscription.unsubscribe()\n\t\t}\n\t}, [])\n\n\treturn value\n}\n"],"names":["useObservable","observable","initialValue","useState","observable$","defaultValue","value","stream","subscribe","val","unsubscribe","initialObservableValue","useEffect","subscription","next","setValue"],"mappings":"yDAiBgBA,EAAiBC,EAAmDC,kBAAyB,YACzFC,EAASF,QACAE,oBAhB7B,SAAmCC,EAA4BC,kBAAyB,UACnFC,EAAQD,SAesDE,EAZhEC,mBACAC,GACCH,EAAQG,IAGTC,cAEKJ,EAKoCK,CAAuBJ,EAAQL,0BAE1EU,iBACOC,EAAeN,EAAOC,mBAAUM,GACrCC,EAASD,uBAGTD,EAAaH,gBAEZ,IAEIJ"}